<!--pages/index/index.wxml-->
<view class="page">
  <!-- 搜索栏 -->
  <search-bar 
    placeholder="搜索乡村文化..."
    bind:search="onSearch"
  ></search-bar>

  <!-- 轮播图 -->
  <swiper 
    class="banner-swiper" 
    indicator-dots="true" 
    autoplay="true" 
    interval="4000" 
    duration="600"
  >
    <block wx:for="{{banners}}" wx:key="id">
      <swiper-item>
        <image 
          src="{{item.image}}" 
          class="banner-image" 
          mode="aspectFill"
          bindtap="onBannerTap"
          data-item="{{item}}"
        ></image>
        <view class="banner-title">{{item.title}}</view>
      </swiper-item>
    </block>
  </swiper>

  <!-- 快捷分类入口 -->
  <view class="category-section">
    <view class="section-title">
      <text class="title-text">文化分类</text>
      <navigator url="/pages/exhibition/exhibition" class="more-link">
        更多 <text class="arrow">></text>
      </navigator>
    </view>
    <scroll-view class="category-scroll" scroll-x>
      <view class="category-grid">
        <view 
          class="category-item" 
          wx:for="{{categories}}" 
          wx:key="id"
          bindtap="onCategoryTap"
          data-id="{{item.id}}"
        >
          <view class="category-icon-wrap">
            <image class="category-icon" src="/images/class_white.png"></image>
          </view>
          <text class="category-name">{{item.name}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- 推荐内容 -->
  <view class="recommend-section">
    <view class="section-title">
      <text class="title-text">为你推荐</text>
      <view class="tab-nav">
        <text 
          class="tab-item {{currentTab === 0 ? 'active' : ''}}"
          bindtap="switchTab"
          data-tab="0"
        >热门</text>
        <text 
          class="tab-item {{currentTab === 1 ? 'active' : ''}}"
          bindtap="switchTab"
          data-tab="1"
        >最新</text>
      </view>
    </view>

    <!-- 内容列表 -->
    <view class="content-wrapper">
      <view class="content-grid">
        <view 
          class="content-item" 
          wx:for="{{contentList}}" 
          wx:key="id"
          bindtap="onContentTap"
          data-item="{{item}}"
        >
          <culture-card item="{{item}}"></culture-card>
        </view>
      </view>
      
      <!-- 加载状态 -->
      <view wx:if="{{loading}}" class="loading">
        <text>加载中...</text>
      </view>
      
      <!-- 没有更多 -->
      <view wx:if="{{!hasMore && contentList.length > 0}}" class="no-more">
        <text>没有更多了</text>
      </view>
    </view>
  </view>
</view>
