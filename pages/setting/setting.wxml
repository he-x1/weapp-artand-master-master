<!--pages/setting/setting.wxml-->
<view class="page">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <image 
      class="bg-image"
      src="/images/bg.png" 
      mode="aspectFill"
    ></image>
    
    <view class="user-info">
      <block wx:if="{{isLoggedIn}}">
        <image class="avatar" src="{{userInfo.avatarUrl}}"></image>
        <view class="user-detail">
          <text class="username">{{userInfo.nickName}}</text>
          <text class="user-id">ID: {{userInfo.id || '乡村文化爱好者'}}</text>
        </view>
      </block>
      <block wx:else>
        <image class="avatar" src="/images/avatar.jpg"></image>
        <view class="user-detail">
          <text class="username">未登录</text>
          <text class="login-tip" bindtap="login">点击登录</text>
        </view>
      </block>
    </view>
  </view>

  <!-- 统计数据 -->
  <view class="stats-card" wx:if="{{isLoggedIn}}">
    <view class="stat-item">
      <text class="stat-num">{{stats.likes}}</text>
      <text class="stat-label">点赞</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-num">{{stats.collects}}</text>
      <text class="stat-label">收藏</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-num">{{stats.history}}</text>
      <text class="stat-label">浏览</text>
    </view>
  </view>

  <!-- 菜单列表 -->
  <view class="menu-section">
    <view class="menu-card">
      <view 
        class="menu-item" 
        wx:for="{{menuItems}}" 
        wx:key="id"
        bindtap="onMenuClick"
        data-id="{{item.id}}"
      >
        <view class="menu-left">
          <image class="menu-icon" src="{{item.icon}}"></image>
          <text class="menu-title">{{item.title}}</text>
        </view>
        <view class="menu-right">
          <text wx:if="{{item.count}}" class="menu-count">{{item.count}}</text>
          <text class="arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- 退出登录按钮 -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="logout">退出登录</button>
  </view>
</view>
